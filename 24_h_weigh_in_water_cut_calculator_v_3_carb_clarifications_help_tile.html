<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>24h Weigh‑In Water Cut Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <meta name="description" content="Water‑cut planner for 24‑hour weigh‑ins (boxing, powerlifting, etc.). Enter bodyweight in kg to generate a plan with water, sodium, carbs, plus recovery guidance and risks."/>
  <style>
    /* Print styles — clean one‑page PDF */
    @media print {
      .no-print { display:none !important; }
      body { color: #000; background: #fff; }
      .tile { break-inside: avoid; }
      .page { padding: 0; box-shadow: none; }
    }
  </style>
</head>
<body class="min-h-screen bg-white text-black">
  <div class="page max-w-6xl mx-auto px-4 md:px-6 py-8 md:py-10">
    <!-- Header -->
    <header class="flex items-center justify-between gap-4">
      <div>
        <h1 class="text-2xl md:text-4xl font-bold tracking-tight">24‑Hour Weigh‑In Water Cut Calculator</h1>
        <p class="text-gray-700 mt-1">Standardised protocol • <span class="font-semibold">24h weigh‑ins only</span> • Not medical advice</p>
      </div>
      <div class="no-print">
        <button id="printBtn" class="px-3 py-2 rounded-xl border border-black bg-white hover:bg-gray-100 text-sm">Print / Save PDF</button>
      </div>
    </header>

    <!-- Input Card -->
    <section class="mt-6 md:mt-8">
      <div class="rounded-2xl bg-white border border-black p-4 md:p-6">
        <div class="grid md:grid-cols-3 gap-4 md:gap-6 items-end">
          <div class="md:col-span-2">
            <label for="bw" class="block text-sm text-gray-700">Bodyweight (kg)</label>
            <input id="bw" type="number" inputmode="decimal" step="0.1" min="20" max="300" placeholder="e.g., 120" class="mt-1 w-full rounded-xl bg-white border border-black px-3 py-2 outline-none focus:ring-2 focus:ring-black" />
            <p class="text-xs text-gray-600 mt-2">Rounding: water <span class="font-semibold">0.25 L</span>; sodium <span class="font-semibold">250 mg</span>; carb energy <span class="font-semibold">250 kcal</span>.</p>
          </div>
          <div class="no-print flex md:justify-end gap-2">
            <button id="calcBtn" class="h-10 md:h-11 px-4 rounded-xl bg-black text-white border border-black font-semibold hover:opacity-90">Calculate</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Results -->
    <section id="results" class="mt-6 md:mt-8 hidden">
      <h2 class="text-xl md:text-2xl font-semibold mb-3">Your 5‑Day Cut Plan</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-5" id="tilesGrid">
        <!-- Tiles injected here -->
      </div>
      <p class="text-sm text-gray-700 mt-3"><span class="font-semibold">Carb notation:</span> value shown is <span class="font-semibold">kcal from carbohydrate</span>; value in brackets is grams (<code>kcal ÷ 4</code>). Example sources (moderate‑GI): creamed rice, basmati/pasta, potatoes, oats/muesli, fruit, wholemeal bread.</p>

      <!-- Helper tile container -->
      <div id="helpTileContainer" class="mt-4"></div>
    </section>

    <!-- Recomposition Plan -->
    <section class="mt-10">
      <div class="rounded-2xl bg-white border border-black p-5 md:p-6">
        <h3 class="text-lg md:text-xl font-semibold">After Weigh‑In: Rapid Recomposition (first 15–30 minutes)</h3>
        <ul class="mt-3 space-y-2 list-disc list-inside">
          <li>~3.5 L fluid through the day containing electrolytes and simple sugars.</li>
          <li>~125 g <span class="font-semibold">moderate‑GI</span> carbohydrate immediately post‑weigh‑in (e.g., creamed rice, basmati, potatoes, fruit, muesli, wholemeal bread).</li>
          <li>2–3 tbsp honey / maple syrup for quick glucose.</li>
          <li>Sip an electrolyte + sugar mix between food bouts; keep salt intake up.</li>
          <li>Keep eating moderate‑GI carbs to comfortable fullness; switch to faster carbs before deadlifts/sprints.</li>
          <li>Limit fats early (they slow gastric emptying). Avoid novel foods.</li>
        </ul>
        <p class="text-gray-700 text-sm mt-3">If you over‑cut and wake underweight, limit the <em>mass</em> of food/liquid you add (e.g., at 104.6 kg for a 105 kg class, keep intake &lt; 0.4 kg) until you’re on class.</p>
      </div>
    </section>

    <!-- Last‑Resort / Hyperthermia Protocol -->
    <section class="mt-8">
      <div class="rounded-2xl bg-white border border-black p-5 md:p-6">
        <h3 class="text-lg md:text-xl font-semibold">Last Resort: Hot‑Bath / Sauna Protocol (Supervised)</h3>
        <p class="text-gray-800 mt-2">Night before: If your bedtime bodyweight is &gt; your class limit + your <span class="font-semibold">Average Overnight Weight Drop (AOWD)</span>, consider a hot‑bath protocol with supervision.</p>
        <ol class="mt-3 space-y-2 list-decimal list-inside">
          <li>Run a bath as hot as tolerable (Epsom salts optional).</li>
          <li>Sit 20 min → cool 10 min. Repeat x3, weigh. If still &gt; class + AOWD, repeat as needed.</li>
          <li>Sleep; recheck in the morning (wake ≥2 h early for AM weigh‑ins).</li>
        </ol>
        <div class="mt-3 rounded-xl border border-black p-3">
          <p class="font-semibold">Warning:</p>
          <p class="text-sm">Heat illness, dehydration, electrolyte imbalance, fainting, and cardiac/kidney strain are real risks. Don’t do this alone.</p>
        </div>
      </div>
    </section>

    <!-- Notes & FAQs -->
    <section class="mt-8 grid md:grid-cols-2 gap-5">
      <div class="rounded-2xl bg-white border border-black p-5 md:p-6">
        <h3 class="text-lg md:text-xl font-semibold">Key Notes</h3>
        <ul class="mt-3 space-y-2 list-disc list-inside">
          <li><span class="font-semibold">AOWD:</span> Track morning vs night for a week. Average nightly drop guides the final night plan.</li>
          <li><span class="font-semibold">Cramping?</span> Usually sodium. Early‑week target is &gt;5,000 mg/day; add salt to meals/drinks.</li>
          <li><span class="font-semibold">Low‑sodium days (‑2 & ‑1):</span> Keep sodium &lt; 1,000 mg/day; avoid salted/processed foods.</li>
          <li><span class="font-semibold">Low food volume (‑1):</span> Favour shakes, unsalted nuts, avocado, un‑salted meats; fibre supplement helps bowel clearance.</li>
          <li><span class="font-semibold">GI basics:</span> Prefer moderate‑GI carbs until late; reserve high‑GI candy/gels for late performance.</li>
        </ul>
      </div>
      <div class="rounded-2xl bg-white border border-black p-5 md:p-6">
        <h3 class="text-lg md:text-xl font-semibold">Risks & Disclaimer</h3>
        <ul class="mt-3 space-y-2 list-disc list-inside">
          <li>Hyponatremia/hypernatremia, dehydration, heat illness.</li>
          <li>Kidney strain, arrhythmia, syncope, cognitive impairment.</li>
          <li>Higher risk for those with medical conditions; consult a qualified professional.</li>
          <li>This tool standardises a common protocol. Use at your own risk.</li>
        </ul>
      </div>
    </section>

    <footer class="mt-10 text-xs text-gray-600">
      <p>Built for athletes and coaches. Rounding: water 0.25 L; sodium 250 mg; carbs 250 kcal.</p>
    </footer>
  </div>

  <script>
    // ===== Helpers =====
    const roundToStep = (value, step) => Math.round(value / step) * step;
    const fmtL = (x) => (Math.round(x * 100) / 100).toFixed(2) + ' L';
    const fmtMg = (x) => x.toLocaleString(undefined) + ' mg';

    // Carb grams (fixed template) and kcal rounding rule
    const CARB_G = { d3: 475, d2: 50, d1: 50 };
    const carbKcal = (g) => roundToStep(g * 4, 250);

    // Water multipliers (per kg) for each day
    const waterL = (bw, mult) => roundToStep(mult * bw, 0.25); // returns liters

    const MULT = {
      d5: 0.0729167,
      d4: 0.0833333,
      d3: 0.0958333,
      d2: 0.0958333,
      d1: 0.1208333
    };

    const sodiumMg = { d5: 5500, d4: 5500, d3: 5500, d2: 750, d1: 750 };

    function makeTile(dayLabel, water, sodium, carbsText, extras=[]) {
      const el = document.createElement('div');
      el.className = 'tile rounded-2xl bg-white border border-black p-4';
      el.innerHTML = `
        <div class="flex items-baseline justify-between">
          <h4 class="text-lg font-semibold">${dayLabel}</h4>
          ${dayLabel.includes('1 Day Out') ? '<span class="text-xs text-gray-600">finish water by ~4 pm*</span>' : ''}
        </div>
        <dl class="mt-2 grid grid-cols-2 gap-x-4 text-sm">
          <div class="contents"><dt class="text-gray-600 pr-2">Water</dt><dd class="font-medium text-right">${fmtL(water)}</dd></div>
          <div class="contents"><dt class="text-gray-600 pr-2">Sodium</dt><dd class="font-medium text-right">${fmtMg(sodium)}</dd></div>
          <div class="contents"><dt class="text-gray-600 pr-2">Carbs (kcal → g)</dt><dd class="font-medium text-right">${carbsText}</dd></div>
        </dl>
        ${extras.length ? `<ul class="mt-2 text-xs text-gray-600 list-disc list-inside">${extras.map(x => `<li>${x}</li>`).join('')}</ul>` : ''}
      `;
      return el;
    }

    function makeInfoTile(title, bullets=[]) {
      const el = document.createElement('div');
      el.className = 'tile rounded-2xl bg-white border border-black p-4 mt-4';
      el.innerHTML = `
        <div class="flex items-baseline justify-between">
          <h4 class="text-lg font-semibold">${title}</h4>
        </div>
        <ul class="mt-2 text-sm list-disc list-inside text-gray-800">
          ${bullets.map(x => `<li>${x}</li>`).join('')}
        </ul>
      `;
      return el;
    }

    function calculate() {
      const bwInput = document.getElementById('bw');
      const results = document.getElementById('results');
      const grid = document.getElementById('tilesGrid');
      const helpWrap = document.getElementById('helpTileContainer');

      const bw = parseFloat((bwInput.value || '').trim());
      if (!bw || bw < 20 || bw > 300) {
        alert('Enter a valid bodyweight in kg (20–300).');
        return;
      }

      // Compute day-by-day
      const d5 = { water: waterL(bw, MULT.d5), sodium: sodiumMg.d5, carbs: 'Normal' };
      const d4 = { water: waterL(bw, MULT.d4), sodium: sodiumMg.d4, carbs: 'Normal' };
      const d3 = { water: waterL(bw, MULT.d3), sodium: sodiumMg.d3, carbs: `${carbKcal(CARB_G.d3)} kcal (${CARB_G.d3} g)` };
      const d2 = { water: waterL(bw, MULT.d2), sodium: sodiumMg.d2, carbs: `${carbKcal(CARB_G.d2)} kcal (${CARB_G.d2} g)` };
      const d1 = { water: waterL(bw, MULT.d1), sodium: sodiumMg.d1, carbs: `${carbKcal(CARB_G.d1)} kcal (${CARB_G.d1} g)` };
      const wi = { water: 0, sodium: 0, carbs: 'None until after weigh‑in' };

      // Render tiles
      grid.innerHTML = '';
      grid.appendChild(makeTile('5 Days Out', d5.water, d5.sodium, d5.carbs, ['Food: normal']));
      grid.appendChild(makeTile('4 Days Out', d4.water, d4.sodium, d4.carbs, ['Food: normal']));
      grid.appendChild(makeTile('3 Days Out', d3.water, d3.sodium, d3.carbs, ['Food: normal']));
      grid.appendChild(makeTile('2 Days Out', d2.water, d2.sodium, d2.carbs, ['Food: normal']));
      grid.appendChild(makeTile('1 Day Out', d1.water, d1.sodium, d1.carbs, ['Food: low volume, low fibre']));
      grid.appendChild(makeTile('Weigh‑In Day', wi.water, wi.sodium, wi.carbs, ['No food or fluid until the official weigh‑in is complete.']));

      // Helper tile for food ideas
      helpWrap.innerHTML = '';
      helpWrap.appendChild(
        makeInfoTile('Food Ideas to Hit Carbs & Sodium', [
          '<strong>Carbs (moderate‑GI):</strong> rice, pasta, potatoes, oats/muesli, fruit, wholemeal bread, creamed rice.',
          '<strong>Fast carbs (use sparingly):</strong> honey/maple syrup, jam on toast, sports drink, confectionery near performance.',
          '<strong>Sodium (5–3 days out):</strong> add table salt across meals (≈ 2,300 mg sodium per tsp), salted nuts, pickles, broth/bouillon, electrolyte tabs with sodium.',
          '<strong>Low sodium (2–1 days out):</strong> choose unsalted meats/eggs, rice, avocado, unsalted nuts; avoid processed/packaged foods and sauces.'
        ])
      );

      results.classList.remove('hidden');
      results.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    // UI wiring
    document.getElementById('calcBtn').addEventListener('click', calculate);
    document.getElementById('printBtn').addEventListener('click', () => window.print());
  </script>
</body>
</html>
